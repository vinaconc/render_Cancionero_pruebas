\documentclass[a4paper,twoside,openany]{book}

% --- Codificación e idioma ---
\usepackage[utf8]{inputenc}
\usepackage[spanish]{babel}
\usepackage{schemata}

% --- Paquetes generales ---
\usepackage{xcolor}
\usepackage[chorded]{songs} % Sin la opción 'verse' para evitar error

% --- Paquetes adicionales ---
\usepackage{pdfpages}
\usepackage[normalem]{ulem}
\usepackage{scrextend}
\usepackage{imakeidx}
\makeindex[name=titleidx, title=Índice de títulos]
\usepackage{hyperref} 

% --- Geometría ---
\usepackage[a4paper,
            top=1cm, 
            bottom=2cm, 
            left=2.5cm, 
            right=1cm, 
            headheight=1.5cm,
            headsep=1cm,
            footskip=1.5cm,
            textwidth=16.5cm,
            textheight=23.42cm,
            showframe=false
            ]{geometry}

% --- Eliminar configuraciones que generan error ---
% Se han eliminado las configuraciones y comandos que dependen de la opción 'verse' no soportada
% \setlength{\verseboxrule}{0pt}
% \setlength{\verserule}{0pt}
% \setlength{\verseleftskip}{0pt}
% \setlength{\verserightskip}{0pt}
% \renewcommand{\versehead}[1]{%
%  \llap{\textbf{#1}\hskip 1em}%
% }
% \renewcommand{\chordfont}{\upshape}

% --- Otras configuraciones ---
\renewcommand{\versesep}{\bigskip}
\noversenumbers 
\baselineadj=-10pt plus 10pt minus 10pt
\renewcommand{\clineparams}{
    \baselineskip=35pt
    \lineskiplimit=35pt
    \lineskip=1pt
}

% --- Comandos personalizados del usuario ---
\newcommand{\version}{}
\newsongkey{v}{\def\version{}}{\def\version{Versión: #1\par}}
\renewcommand{\extendprelude}{\showrefs\showauthors\toctitle {\bfseries\version}}
\newcommand{\indexword}[1]{\textcolor{blue}{#1}\index{#1}}

\renewenvironment{verse}[1][\unskip]{%
  \par\begingroup
  \raggedright
  \let\=\@normalcr
}{\par\endgroup}

% --- INICIO DEL DOCUMENTO ---
\begin{document}

\frontmatter
\tableofcontents{\thispagestyle{empty}}
\clearpage

\mainmatter
\pagestyle{plain}

\renewcommand{\everychorus}{\textnote{CORO:}}
\renewcommand{\chorusfont}{\it}
\renewcommand{\printchord}[1]{\rmfamily\bf#1}
\renewcommand{\versehead}[1]{\llap{\textbf{#1}\hskip 1em}} 

% --- CONTENIDO DE LAS CANCIONES AQUÍ ---

% --- IMPRIME ÍNDICE PERSONALIZADO DE TÍTULOS ---
\printindex[titleidx]

\end{document}
