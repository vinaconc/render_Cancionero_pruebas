\documentclass[a4paper,twoside,openany]{book}

% --- Codificación e idioma ---
\usepackage[utf8]{inputenc}
\usepackage[spanish]{babel}

% --- Paquetes generales ---
\usepackage{xcolor}
\usepackage[chorded, verse]{songs} % Mantener opción verse para marcos

% --- Paquetes adicionales ---
\usepackage{pdfpages}
\usepackage[normalem]{ulem}
\usepackage{scrextend}
\usepackage{imakeidx}
\makeindex[name=titleidx, title=Índice de títulos]
\usepackage{hyperref} 

% --- Geometría ---
\usepackage[a4paper,
            top=1cm, 
            bottom=2cm, 
            left=2.5cm, 
            right=1cm, 
            headheight=1.5cm,
            headsep=1cm,
            footskip=1.5cm,
            textwidth=16.5cm,
            textheight=23.42cm,
            showframe=false
            ]{geometry}

% --- Configuración para marcos en versos (activar marcos con línea fina) ---
\setlength{\verseboxrule}{0.5pt}  % Ancho de la línea del recuadro
\setlength{\verserule}{0.5pt}     % Línea vertical al inicio de la estrofa
\setlength{\verseleftskip}{0pt}   % Sin sangría izquierda extra
\setlength{\verserightskip}{0pt}  % Sin sangría derecha extra

% --- Configuraciones del paquete songs ---
\renewcommand{\versehead}[1]{%
  \llap{\textbf{#1}\hskip 1em}%
}
\renewcommand{\versesep}{\bigskip}
\renewcommand{\chordfont}{\upshape} 
\noversenumbers 
\baselineadj=-10pt plus 10pt minus 10pt
\renewcommand{\clineparams}{
    \baselineskip=35pt
    \lineskiplimit=35pt
    \lineskip=1pt
}

% --- Comandos personalizados del usuario ---
\newcommand{\version}{}
\newsongkey{v}{\def\version{}}{\def\version{Versión: #1\par}}
\renewcommand{\extendprelude}{\showrefs\showauthors\toctitle {\bfseries\version}}
\newcommand{\indexword}[1]{\textcolor{blue}{#1}\index{#1}}

\renewenvironment{verse}[1][\unskip]{%
  \par\begingroup
  \raggedright
  \let\=\@normalcr
}{\par\endgroup}

% --- INICIO DEL DOCUMENTO ---
\begin{document}

\frontmatter
\tableofcontents{\thispagestyle{empty}}
\clearpage

\mainmatter
\pagestyle{plain}

\renewcommand{\everychorus}{\textnote{CORO:}}
\renewcommand{\chorusfont}{\it}
\renewcommand{\printchord}[1]{\rmfamily\bf#1}

% Aquí empieza el cancionero, ejemplo con entorno songs
% Recuerde evitar multicols o columnas en esta sección para evitar rupturas de caja
% --- INICIO CANCIONERO ---
% --- FIN CANCIONERO ---
\printindex[titleidx]
\end{document}

